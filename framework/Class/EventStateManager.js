const a64_0x52ca14=a64_0x6846;(function(_0x29011e,_0x9121ea){const _0x123d7d=a64_0x6846,_0x1403f1=_0x29011e();while(!![]){try{const _0x3ecf8f=-parseInt(_0x123d7d(0x1b8))/0x1*(parseInt(_0x123d7d(0x1b4))/0x2)+parseInt(_0x123d7d(0x1cc))/0x3*(-parseInt(_0x123d7d(0x19d))/0x4)+parseInt(_0x123d7d(0x1d3))/0x5+-parseInt(_0x123d7d(0x1d1))/0x6+-parseInt(_0x123d7d(0x199))/0x7+parseInt(_0x123d7d(0x1d6))/0x8*(-parseInt(_0x123d7d(0x1d0))/0x9)+parseInt(_0x123d7d(0x1bc))/0xa;if(_0x3ecf8f===_0x9121ea)break;else _0x1403f1['push'](_0x1403f1['shift']());}catch(_0x4a187d){_0x1403f1['push'](_0x1403f1['shift']());}}}(a64_0x39ca,0x87314));const a64_0x58098d=(function(){let _0x3d45fb=!![];return function(_0x54c76f,_0x5dece6){const _0xfe738=_0x3d45fb?function(){const _0x2f229a=a64_0x6846;if(_0x2f229a(0x1c9)==='pgZKl'){const _0x30c2fc=_0x12d387?function(){if(_0x1cd62a){const _0x4c46e6=_0xd6f0d3['apply'](_0x4fe50b,arguments);return _0x1efab7=null,_0x4c46e6;}}:function(){};return _0x1e7a2a=![],_0x30c2fc;}else{if(_0x5dece6){const _0x3e3f9c=_0x5dece6['apply'](_0x54c76f,arguments);return _0x5dece6=null,_0x3e3f9c;}}}:function(){};return _0x3d45fb=![],_0xfe738;};}()),a64_0xee1aea=a64_0x58098d(this,function(){const _0x2c684=a64_0x6846,_0x5585e8={'ztGSZ':'(((.+)+)+)+$'};return a64_0xee1aea[_0x2c684(0x1da)]()[_0x2c684(0x1cf)](_0x5585e8[_0x2c684(0x1be)])['toString']()[_0x2c684(0x1b2)](a64_0xee1aea)[_0x2c684(0x1cf)]('(((.+)+)+)+$');});function a64_0x6846(_0xfa0e2c,_0x2bdc4b){const _0x1259f4=a64_0x39ca();return a64_0x6846=function(_0xee1aea,_0x58098d){_0xee1aea=_0xee1aea-0x194;let _0x39caeb=_0x1259f4[_0xee1aea];if(a64_0x6846['BsuPZz']===undefined){var _0x68467c=function(_0x54bfd4){const _0x116a3f='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x70152a='',_0x20a33f='',_0x59e67b=_0x70152a+_0x68467c;for(let _0x3df09e=0x0,_0x4ddca1,_0x438552,_0x5ab275=0x0;_0x438552=_0x54bfd4['charAt'](_0x5ab275++);~_0x438552&&(_0x4ddca1=_0x3df09e%0x4?_0x4ddca1*0x40+_0x438552:_0x438552,_0x3df09e++%0x4)?_0x70152a+=_0x59e67b['charCodeAt'](_0x5ab275+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x4ddca1>>(-0x2*_0x3df09e&0x6)):_0x3df09e:0x0){_0x438552=_0x116a3f['indexOf'](_0x438552);}for(let _0x12d387=0x0,_0x4f504c=_0x70152a['length'];_0x12d387<_0x4f504c;_0x12d387++){_0x20a33f+='%'+('00'+_0x70152a['charCodeAt'](_0x12d387)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x20a33f);};a64_0x6846['xnxjjL']=_0x68467c,_0xfa0e2c=arguments,a64_0x6846['BsuPZz']=!![];}const _0x25fe94=_0x1259f4[0x0],_0x3c7253=_0xee1aea+_0x25fe94,_0x5be8e8=_0xfa0e2c[_0x3c7253];if(!_0x5be8e8){const _0x1b2ab7=function(_0x564fd7){this['EdoOzL']=_0x564fd7,this['smrVDJ']=[0x1,0x0,0x0],this['kDXOtZ']=function(){return'newState';},this['hjBzqW']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['fGDSlb']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x1b2ab7['prototype']['sutAyc']=function(){const _0x3dffc8=new RegExp(this['hjBzqW']+this['fGDSlb']),_0x1e7a2a=_0x3dffc8['test'](this['kDXOtZ']['toString']())?--this['smrVDJ'][0x1]:--this['smrVDJ'][0x0];return this['zpkWyt'](_0x1e7a2a);},_0x1b2ab7['prototype']['zpkWyt']=function(_0x1cd62a){if(!Boolean(~_0x1cd62a))return _0x1cd62a;return this['beEueK'](this['EdoOzL']);},_0x1b2ab7['prototype']['beEueK']=function(_0x34d063){for(let _0x193b82=0x0,_0x55da21=this['smrVDJ']['length'];_0x193b82<_0x55da21;_0x193b82++){this['smrVDJ']['push'](Math['round'](Math['random']())),_0x55da21=this['smrVDJ']['length'];}return _0x34d063(this['smrVDJ'][0x0]);},new _0x1b2ab7(a64_0x6846)['sutAyc'](),_0x39caeb=a64_0x6846['xnxjjL'](_0x39caeb),_0xfa0e2c[_0x3c7253]=_0x39caeb;}else _0x39caeb=_0x5be8e8;return _0x39caeb;},a64_0x6846(_0xfa0e2c,_0x2bdc4b);}function a64_0x39ca(){const _0x3011bc=['DMfSDwvZ','zgLZywjSzwq','AM9PBG','ChjLCgfYzq','mtCXmdG3wMfOvefZ','zgvSzxrL','q2v0DguGy29TBwfUzguGzxn0ihjLC2vYDMvYihvUAxf1zw1LBNqGCg91CIbSzxmGz3jVDxbLCW','igvZDcbTywLUDgvUyw50ia','mtjWuvnmEK4','CMvTB3zL','zxHWB3j0CW','igvZDcbKzwPHigfJDgLM','uMLkCwS','ifDirvjfigPPzca9id87','D2fYBG','igvZDcbTywLUDgvUyw50igfJDgLM','idOGCg91CIbSj2fJDgL2zxik','iGOGicaGicaGicKkicaGicaG','Aw5JBhvKzxm','rxjYB3iGz2v0DgLUzYbHy3rPB24GzM9YigPPzca','icHQAwqSigfJDgLVBIKkicaGicaGicaGifzbtfvfuYaOpYWGpYKkicaGicaGicaGie9oienptKzmsunukgPPzcKGre8GvvbeqvrfifnfvcbHy3rPB24GpsbLEgnSDwrLzc5Hy3rPB247cIaGicaGicaG','z2v0qwn0Aw9UrM9YsMLK','qunusu9ouW','ANv5se8','ihDPDgGGywn0Aw9Uia','iIWkicaGicaGicaGigfJDgLVBIburvHuie5pvcbovuXmierfrKfvtfqGiG','idOGCg91CIbHy3rPDMvYigv0ignOyw5NzxiGBcDHy3rPB24Gzw4GCMv0AxjLCG','BM9U','ihvWzgf0zwqGD2L0AcbHy3rPB24G','y29UC3rYDwn0B3i','C3bSAxq','mtbgt0T5z0q','igfJDgLVBI8','z2v0','z2vUzxjHDgvdBwq','nZyXmtvKyLDcB00','cIaGicaGicaGicbjtLnfuLqGsu5utYa','ywn0Aw9U','Dg9mB3DLCKnHC2u','mJK3ota3mtbVCez3wvu','CMv0AxjLCG','ENrhu1O','vfnQsgG','DhjPBq','sMLKia','u0vmrunuigv0yxqGrLjptsa','v1PlwvC','rxjYB3iGDxbKyxrPBMCGAMLKia','C3vWCa','lI4VEM9RB3u','zxjYB3i','y1v2vxC','wwrwBLy','zxzHyw4','igzVCIbQAwqG','ndqYntqYsxz6ugDS','t1HtCKe','zw5HyMXLzezVCKPPza','C2vHCMnO','ndaWnxLhrgziAq','nJi1odC1nMDivw9ryq','idOGCg91CIbJAgfUz2vYigWNywn0Aw9UigvUia','mti4mdyZmgDevMjrsG','igvZDcbTywLUDgvUyw50igrLC2fJDgL2zq','zxrHDa','mtqYmtz1vevwywq','igvZDcbKzwPHigrLC2fJDgL2zq','uxLtu1m','CNvU','Dg9tDhjPBMC','rxjYB3iGy2HLy2TPBMCGzw5HyMXLzcbZDgf0zsbMB3iGAMLKia','zw5HyMXLza','C2v0','Bg9N','vw5LigvYCMv1CIbLC3qGC3vYDMvUDwuGlcb2zwLSBgv6ig5VDxmGzw4GAw5MB3jTzxOGC3vYigXLigzVCNvTihnPihbLCMnPC3rHBNq','ywn0Aw9UlW','u1rbvevt'];a64_0x39ca=function(){return _0x3011bc;};return a64_0x39ca();}a64_0xee1aea();const NodeCache=require('node-cache'),initializeDb=require('../../bdd/_index'),{zokou}=require(a64_0x52ca14(0x1c6));class EventStateManager{#tableName;#db=initializeDb();['STATES']={'enabled':'oui','disabled':a64_0x52ca14(0x1b0)};[a64_0x52ca14(0x1ab)]={'remove':a64_0x52ca14(0x1bd),'delete':a64_0x52ca14(0x1c5),'warn':'warn'};#defaultAction=this[a64_0x52ca14(0x1ab)]['remove'];#defaultState=this['STATES']['disabled'];#cache;constructor(_0x45719b,_0x4f7a27=new NodeCache()){this.#tableName=_0x45719b,this.#cache=_0x4f7a27,this.#createTable();}#createTable(){const _0x18937e=a64_0x52ca14;this.#db['prepare']('\x0a\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+this.#tableName+'\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20jid\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20etat\x20TEXT\x20NOT\x20NULL\x20DEFAULT\x20\x22'+this.#defaultState+_0x18937e(0x1ae)+this.#defaultAction+_0x18937e(0x1a6))['run']();}#addOrUpdateJid(_0x2a4aa0,_0x356f4b=this.#defaultState){this.#db['prepare']('\x0a\x20\x20\x20\x20\x20\x20\x20\x20INSERT\x20INTO\x20'+this.#tableName+'\x20(jid,\x20etat)\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?)\x0a\x20\x20\x20\x20\x20\x20\x20\x20ON\x20CONFLICT(jid)\x20DO\x20UPDATE\x20SET\x20etat\x20=\x20excluded.etat;\x0a\x20\x20\x20\x20\x20\x20\x20\x20')['run'](_0x2a4aa0,_0x356f4b);const _0xaeff99=this.#cache['get'](_0x2a4aa0)||{};this.#cache['set'](_0x2a4aa0,{..._0xaeff99,'etat':_0x356f4b});}#updateJidAction(_0x36446c,_0x184e8c=this.#defaultAction){const _0x2db056=a64_0x52ca14;try{this.#db[_0x2db056(0x198)](_0x2db056(0x1b9)+this.#tableName+_0x2db056(0x1a9))[_0x2db056(0x1d9)](_0x36446c,_0x184e8c);const _0x251975=this.#cache['get'](_0x36446c)||{};this.#cache[_0x2db056(0x1dd)](_0x36446c,{..._0x251975,'action':_0x184e8c}),console['log'](_0x2db056(0x1c1)+_0x36446c+_0x2db056(0x1b1)+_0x184e8c);}catch(_0x219700){console[_0x2db056(0x1c7)](_0x2db056(0x1c4)+_0x36446c+_0x2db056(0x1ad)+_0x184e8c+':',_0x219700);throw _0x219700;}}['enabledForJid'](_0x6d3e11){const _0x1a2e17=a64_0x52ca14,_0x3b2ce5={'jzfrQ':function(_0x3ab1e5,_0x1106ac){return _0x3ab1e5!==_0x1106ac;}};try{const _0x4591af=this.#cache[_0x1a2e17(0x1b6)](_0x6d3e11);if(_0x3b2ce5['jzfrQ'](_0x4591af?.['etat'],undefined))return _0x3b2ce5['jzfrQ'](_0x4591af[_0x1a2e17(0x1d5)],this.#defaultState);const _0x4f69b4=this.#db[_0x1a2e17(0x198)](_0x1a2e17(0x1c2)+this.#tableName+_0x1a2e17(0x1a2))['get'](_0x6d3e11);if(_0x4f69b4)return this.#cache[_0x1a2e17(0x1dd)](_0x6d3e11,{...this.#cache[_0x1a2e17(0x1b6)](_0x6d3e11)||{},'etat':_0x4f69b4[_0x1a2e17(0x1d5)]}),_0x4f69b4['etat']!==this.#defaultState;return![];}catch(_0x58cf9b){return console[_0x1a2e17(0x1c7)](_0x1a2e17(0x1db)+_0x6d3e11+':',_0x58cf9b),![];}}[a64_0x52ca14(0x1aa)](_0x1a993e){const _0x1193e1=a64_0x52ca14;try{const _0x1d8bfd=this.#cache['get'](_0x1a993e);if(_0x1d8bfd?.[_0x1193e1(0x1ba)])return _0x1d8bfd[_0x1193e1(0x1ba)];const _0x5e32b4=this.#db[_0x1193e1(0x198)]('SELECT\x20action\x20FROM\x20'+this.#tableName+'\x20WHERE\x20jid\x20=\x20?;')[_0x1193e1(0x1b6)](_0x1a993e);if(_0x5e32b4)return this.#cache['set'](_0x1a993e,{...this.#cache['get'](_0x1a993e)||{},'action':_0x5e32b4[_0x1193e1(0x1ba)]}),_0x5e32b4['action'];return this.#defaultAction;}catch(_0x3196ee){console[_0x1193e1(0x1c7)](_0x1193e1(0x1a8)+_0x1a993e+':',_0x3196ee);throw _0x3196ee;}}[a64_0x52ca14(0x1b7)](_0x188c56){const _0x5d3376=a64_0x52ca14,_0x50c59b={'QySSS':_0x5d3376(0x19b),'juyHO':function(_0x2be852,_0x4fe641){return _0x2be852(_0x4fe641);},'evaan':'Vous\x20n\x27avez\x20pas\x20les\x20permissions\x20necessaires','RiJqk':_0x5d3376(0x1cd),'qCbxz':'ucURI','TSjHh':function(_0x4e62e0,_0x3db184){return _0x4e62e0==_0x3db184;},'DJgRv':function(_0x1ff51f,_0x5e9b70){return _0x1ff51f(_0x5e9b70);},'cUvUw':function(_0x4eea4c,_0x27302b){return _0x4eea4c(_0x27302b);},'lgaan':function(_0x54b943,_0x329070){return _0x54b943!==_0x329070;},'hwhyY':function(_0x343de7,_0x16cbcf){return _0x343de7(_0x16cbcf);}},{nomCom:_0x4fd92e,categorie:_0x1edf77,desc:_0x39d1be,alias:_0x3f4483,reaction:_0x5f3f16}=_0x188c56;zokou({'nomCom':_0x4fd92e,'categorie':_0x1edf77,'reaction':_0x5f3f16,'desc':_0x39d1be,'alias':_0x3f4483},async(_0x35a9f8,_0xf5919,_0x3f57ff)=>{const _0xe823ca=_0x5d3376,{verifGroupe:_0xdb40e7,verifAdmin:_0x396644,ms:_0xbaff05,arg:_0xda58c2,superUser:_0x322fa7,repondre:_0x106b00}=_0x3f57ff;if(!_0xdb40e7)return _0x106b00(_0x50c59b[_0xe823ca(0x1d8)]);if(!_0x322fa7&&!_0x396644)return _0x50c59b[_0xe823ca(0x1ac)](_0x106b00,_0x50c59b[_0xe823ca(0x1ca)]);try{if(_0x50c59b[_0xe823ca(0x1a1)]!==_0x50c59b['qCbxz']){const _0x3f4369='\x0a'+_0x4fd92e+'\x20'+this[_0xe823ca(0x194)][_0xe823ca(0x1dc)]+_0xe823ca(0x1a5)+_0x4fd92e+'\x20'+this[_0xe823ca(0x194)][_0xe823ca(0x196)]+'\x20:\x20pour\x20le\x20desactiver\x0a'+_0x4fd92e+'\x20action/'+this['ACTIONS'][_0xe823ca(0x19e)]+_0xe823ca(0x1d2)+this['ACTIONS'][_0xe823ca(0x19e)]+'\x0a'+_0x4fd92e+_0xe823ca(0x1b5)+this['ACTIONS'][_0xe823ca(0x19a)]+_0xe823ca(0x1d2)+this['ACTIONS']['remove']+'\x0a'+_0x4fd92e+_0xe823ca(0x1b5)+this[_0xe823ca(0x1ab)][_0xe823ca(0x1a3)]+_0xe823ca(0x1d2)+this['ACTIONS'][_0xe823ca(0x19e)]+'\x0a'+_0x4fd92e+'\x20'+this['ACTIONS'][_0xe823ca(0x19e)]+'\x20'+this[_0xe823ca(0x194)][_0xe823ca(0x1dc)]+_0xe823ca(0x1af);if(!_0xda58c2||!_0xda58c2[0x0]||_0x50c59b[_0xe823ca(0x1bf)](_0xda58c2[_0xe823ca(0x197)]('')[_0xe823ca(0x1c0)](),''))return _0x106b00(_0x3f4369);const _0x14813e=_0xda58c2[0x0][_0xe823ca(0x1bb)]();if(_0x14813e==this[_0xe823ca(0x194)][_0xe823ca(0x1dc)]){if(this[_0xe823ca(0x1ce)](_0x35a9f8))return _0x106b00(_0x4fd92e+_0xe823ca(0x1a0));return this.#addOrUpdateJid(_0x35a9f8,_0x14813e),_0x50c59b['DJgRv'](_0x106b00,_0x4fd92e+_0xe823ca(0x1a4));}else{if(_0x14813e==this[_0xe823ca(0x194)][_0xe823ca(0x196)]){if(!this['enabledForJid'](_0x35a9f8))return _0x50c59b[_0xe823ca(0x1c8)](_0x106b00,_0x4fd92e+_0xe823ca(0x1d7));return this.#addOrUpdateJid(_0x35a9f8,_0x14813e),_0x50c59b['juyHO'](_0x106b00,_0x4fd92e+_0xe823ca(0x1d4));}else{if(_0x14813e['startsWith'](_0xe823ca(0x1e0))){const _0x2e89bc=_0x14813e[_0xe823ca(0x1b3)]('/')[0x1][_0xe823ca(0x1c0)]()[_0xe823ca(0x1bb)]();if(!Object[_0xe823ca(0x195)](this['ACTIONS'])[_0xe823ca(0x1a7)](_0x2e89bc))return _0x106b00('L\x27action\x20'+_0x2e89bc+'\x20n\x27est\x20pas\x20valide.\x20Les\x20actions\x20valides\x20sont:\x20'+Object[_0xe823ca(0x195)](this[_0xe823ca(0x1ab)])[_0xe823ca(0x197)](',\x20'));return this.#updateJidAction(_0x35a9f8,_0x2e89bc),_0x106b00('L\x27action\x20de\x20'+_0x4fd92e+_0xe823ca(0x19c)+_0x2e89bc);}else return _0x50c59b['lgaan']('WpGPX',_0xe823ca(0x1c3))?_0x106b00(_0x3f4369):_0x1881e3(_0x4e3954);}}}else{_0x35ed9d['error']('Error\x20getting\x20action\x20for\x20jid\x20'+_0xcf45dd+':',_0x48cf00);throw _0x140269;}}catch(_0x194336){return console[_0xe823ca(0x1de)]('Error\x20setting\x20'+_0x4fd92e+_0xe823ca(0x1cb)+_0x35a9f8+':\x20'+_0x194336),_0x50c59b['hwhyY'](_0x106b00,_0xe823ca(0x1df));}});}}module[a64_0x52ca14(0x19f)]=EventStateManager;